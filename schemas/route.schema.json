{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://routeforce.local/schemas/route.schema.json",
  "title": "Route Result",
  "description": "Route response shapes produced by RouteForce endpoints. Accepts either a full result object or an array of stop objects.",
  "oneOf": [ { "$ref": "#/definitions/route_result" }, { "type": "array", "items": { "$ref": "#/definitions/stop" } } ],
  "definitions": {
    "id": { "oneOf": [ { "type": "string", "minLength": 1 }, { "type": "integer" } ] },
    "coord_pair": {
      "oneOf": [
        {
          "type": "object",
          "required": ["lat", "lng"],
          "properties": {
            "lat": { "type": "number", "minimum": -90, "maximum": 90 },
            "lng": { "type": "number", "minimum": -180, "maximum": 180 }
          }
        },
        {
          "type": "object",
          "required": ["latitude", "longitude"],
          "properties": {
            "latitude": { "type": "number", "minimum": -90, "maximum": 90 },
            "longitude": { "type": "number", "minimum": -180, "maximum": 180 }
          }
        }
      ]
    },
    "stop": {
      "type": "object",
      "additionalProperties": true,
      "allOf": [ { "$ref": "#/definitions/coord_pair" } ],
      "required": ["id"],
      "properties": {
        "id": { "$ref": "#/definitions/id" },
        "name": { "type": "string" },
        "address": { "type": "string" },
        "order": { "type": "integer", "minimum": 0 },
        "priority": { "oneOf": [ { "type": "string", "enum": ["low", "medium", "high"] }, { "type": "integer", "minimum": 1, "maximum": 3 } ] }
      }
    },
    "route_result": {
      "type": "object",
      "additionalProperties": true,
      "required": ["route"],
      "properties": {
        "route": { "type": "array", "items": { "$ref": "#/definitions/stop" } },
        "route_id": { "oneOf": [ { "type": "integer" }, { "type": "string" } ] },
        "algorithm_used": { "type": "string", "enum": ["default", "genetic", "simulated_annealing", "multi_objective"] },
        "total_distance_km": { "type": "number", "minimum": 0 },
        "total_stops": { "type": "integer", "minimum": 0 },
        "processing_time": { "type": "number", "minimum": 0 },
        "optimization_score": { "type": "number" }
      }
    }
  }
}

